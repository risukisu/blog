---
---

<div class="theme-toggle-wrapper">
	<span id="theme-warn" class="theme-warn">[WARN] light mode is for losers</span>
	<button id="theme-toggle" type="button" class="theme-toggle">[DARK]</button>
</div>

<script is:inline>
	(function() {
		var btn = document.getElementById('theme-toggle');
		var warn = document.getElementById('theme-warn');
		var isLight = document.documentElement.classList.contains('light');
		var clickCount = 0;
		var clickTimer = null;
		var REQUIRED_CLICKS = 5;

		if (isLight) btn.textContent = '[LITE]';

		function showWarn(msg) {
			warn.textContent = msg;
			warn.classList.remove('show', 'pop');
			void warn.offsetWidth;
			warn.classList.add('show', 'pop');
		}

		var hideTimer = null;

		btn.addEventListener('click', function() {
			var currentlyLight = document.documentElement.classList.contains('light');

			if (currentlyLight) {
				document.documentElement.classList.remove('light');
				localStorage.setItem('theme', 'dark');
				btn.textContent = '[DARK]';
				clickCount = 0;
				warn.classList.remove('show');
				clearTimeout(hideTimer);
				return;
			}

			clickCount++;
			clearTimeout(clickTimer);
			clearTimeout(hideTimer);
			clickTimer = setTimeout(function() { clickCount = 0; }, 3000);

			if (clickCount >= REQUIRED_CLICKS) {
				document.documentElement.classList.add('light');
				localStorage.setItem('theme', 'light');
				btn.textContent = '[LITE]';
				clickCount = 0;
				showWarn('[LITE] told you');
				hideTimer = setTimeout(function() { warn.classList.remove('show', 'pop'); }, 3000);
			} else if (clickCount === 1) {
				showWarn('[WARN] light mode is for losers');
				hideTimer = setTimeout(function() { warn.classList.remove('show', 'pop'); }, 3000);
			} else {
				var remaining = REQUIRED_CLICKS - clickCount;
				var step = remaining === 1 ? 'step' : 'steps';
				showWarn('You are ' + remaining + ' ' + step + ' away from being a loser');
				hideTimer = setTimeout(function() { warn.classList.remove('show', 'pop'); }, 3000);
			}
		});
	})();
</script>

<style>
	.theme-toggle-wrapper {
		display: flex;
		align-items: center;
		gap: 0.5em;
	}
	.theme-toggle {
		font-family: "JetBrains Mono", monospace;
		font-size: 0.8em;
		color: var(--text-muted);
		background: none;
		border: 1px solid var(--border);
		padding: 0.3em 0.6em;
		cursor: pointer;
		transition: color 0.2s, border-color 0.2s;
		border-radius: 2px;
		flex-shrink: 0;
	}
	.theme-toggle:hover {
		color: var(--amber);
		border-color: var(--amber);
	}
	.theme-warn {
		font-size: 0.7em;
		color: var(--amber);
		text-shadow: var(--glow-amber);
		white-space: nowrap;
		opacity: 0;
		pointer-events: none;
		transform: scale(0.8);
		transition: opacity 0.2s, transform 0.2s;
	}
	.theme-warn.show {
		opacity: 1;
		transform: scale(1);
	}
	.theme-warn.pop {
		animation: pop 0.3s ease-out;
	}
	@keyframes pop {
		0% { transform: scale(0.6); opacity: 0; }
		50% { transform: scale(1.1); }
		100% { transform: scale(1); opacity: 1; }
	}
</style>
